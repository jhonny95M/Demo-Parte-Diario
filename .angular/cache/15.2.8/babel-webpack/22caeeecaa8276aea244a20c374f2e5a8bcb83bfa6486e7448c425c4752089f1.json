{"ast":null,"code":"import { TypeLoading } from '../model/TypeLoading';\nimport { map } from 'rxjs';\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/authentication.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"./login-slide/login-slide.component\";\nimport * as i6 from \"../common/loading/loading.component\";\nimport * as i7 from \"./listado-empresa/listado-empresa.component\";\nfunction LoginComponent_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelement(2, \"app-loading\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"typeLoad\", ctx_r0.getTypeLoad);\n  }\n}\nfunction LoginComponent_16_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"form\")(1, \"div\", 14)(2, \"div\", 15)(3, \"div\", 16)(4, \"label\", 17);\n    i0.ɵɵtext(5, \"Usuario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 15)(8, \"div\", 16)(9, \"label\", 19);\n    i0.ɵɵtext(10, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 20);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"div\", 21)(13, \"p\", 22)(14, \"em\");\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(16, \"div\", 23)(17, \"div\", 9);\n    i0.ɵɵelementStart(18, \"div\", 24)(19, \"div\", 25)(20, \"button\", 26);\n    i0.ɵɵtext(21, \"Inicie sesi\\u00F3n\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(15);\n    i0.ɵɵtextInterpolate(ctx_r4.loginMesssage);\n  }\n}\nfunction LoginComponent_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, LoginComponent_16_ng_template_0_Template, 22, 1, \"ng-template\");\n  }\n}\nfunction LoginComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-listado-empresa\", 27);\n    i0.ɵɵlistener(\"OnAceptar\", function LoginComponent_ng_template_17_Template_app_listado_empresa_OnAceptar_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.enviarListadoEmpresa);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"perfilEmpresaDTOs\", ctx_r3.perfilEmpresaDTOs);\n  }\n}\nexport class LoginComponent {\n  constructor(userService, router) {\n    this.userService = userService;\n    this.router = router;\n    this.isProduction = environment.production;\n    this.mostrarEmpresa = false;\n    this.sleepEmpresa = false;\n    this.getTypeLoad = TypeLoading.BallBeat;\n    this.disabled = true;\n    this.messageStyles = \"visibility:hidden\";\n  }\n  validarUserAndEmpresaAsync() {\n    return this.userService.AthenticateByEmpresaAsync(this.user).pipe(map(returnedUser => {\n      if (returnedUser != null) {\n        // (AuthenticationStateProvider as State.AuthState).MarkUserAsAuthenticated(returnedUser);\n        if (this.isProduction) {\n          if (returnedUser.IdPerfiles.some(c => c === 62)) {\n            this.router.navigate(['/http://192.168.252.6/webproduccion']);\n          } else {\n            this.router.navigate(['/']);\n          }\n        } else {\n          this.router.navigate(['/']);\n        }\n        return true;\n      } else {\n        this.loginMesssage = \"Invalid username or password\";\n        return false;\n      }\n    }));\n    // if (returnedUser != null) {\n    //   await (AuthenticationStateProvider as State.AuthState).MarkUserAsAuthenticated(returnedUser);\n    //   if (environment.IsProduction()) {\n    //     if (returnedUser.IdPerfiles.some(c => c === 62)) {\n    //       NavigationManager.NavigateTo(\"http://192.168.252.6/webproduccion\");\n    //     } else {\n    //       NavigationManager.NavigateTo(\"\");\n    //     }\n    //   } else {\n    //     NavigationManager.NavigateTo(\"\");\n    //   }\n    //   return true;\n    // } else {\n    //   LoginMesssage = \"Invalid username or password\";\n    //   return false;\n    // }\n  }\n\n  enviarListadoEmpresa(e) {\n    this.user.IdEmpresa = e;\n    this.validarUserAndEmpresaAsync();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 19,\n  vars: 3,\n  consts: [[1, \"app-container\", \"app-theme-white\", \"body-tabs-shadow\"], [1, \"app-container\"], [1, \"h-100\"], [1, \"h-100\", \"no-gutters\", \"row\"], [1, \"h-100\", \"d-flex\", \"bg-white\", \"justify-content-center\", \"align-items-center\", \"col-md-12\", \"col-lg-8\"], [1, \"mx-auto\", \"app-login-box\", \"col-sm-12\", \"col-md-10\", \"col-lg-9\"], [1, \"app-logo\"], [1, \"mb-0\"], [1, \"d-block\"], [1, \"divider\", \"row\"], [4, \"ngIf\"], [4, \"ngIf\", \"ngIfElse\"], [\"mostrarEmpresaElse\", \"\"], [3, \"typeLoad\"], [1, \"form-row\"], [1, \"col-md-6\"], [1, \"position-relative\", \"form-group\"], [\"for\", \"Dni\", 1, \"\"], [\"name\", \"Dni\", \"id\", \"Dni\", \"placeholder\", \"Ingrese su usuario\", \"type\", \"text\", 1, \"form-control\"], [\"for\", \"examplePassword\", 1, \"\"], [\"name\", \"password\", \"id\", \"examplePassword\", \"placeholder\", \"Ingrese su contrase\\u00F1a\", \"type\", \"password\", 1, \"form-control\"], [1, \"position-relative\", \"form\"], [2, \"color\", \"red\", \"text-align\", \"center\"], [1, \"position-relative\", \"form-check\"], [1, \"d-flex\", \"align-items-center\"], [1, \"ml-auto\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary-ememsa\", \"btn-lg\"], [3, \"perfilEmpresaDTOs\", \"OnAceptar\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n      i0.ɵɵelement(4, \"app-login-slide\");\n      i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5);\n      i0.ɵɵelement(7, \"div\", 6);\n      i0.ɵɵelementStart(8, \"h4\", 7)(9, \"span\", 8);\n      i0.ɵɵtext(10, \"Bienvenido,\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"span\");\n      i0.ɵɵtext(12, \"Inicie sesi\\u00F3n con su cuenta.\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(13, \"div\", 9);\n      i0.ɵɵelementStart(14, \"div\");\n      i0.ɵɵtemplate(15, LoginComponent_ng_container_15_Template, 3, 1, \"ng-container\", 10);\n      i0.ɵɵtemplate(16, LoginComponent_16_Template, 1, 0, null, 11);\n      i0.ɵɵtemplate(17, LoginComponent_ng_template_17_Template, 1, 1, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      const _r2 = i0.ɵɵreference(18);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", ctx.sleepEmpresa);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.mostrarEmpresa)(\"ngIfElse\", _r2);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.LoginSlideComponent, i6.LoadingComponent, i7.ListadoEmpresaComponent],\n  styles: [\"[_ngcontent-%COMP%]::deep   .h-100[_ngcontent-%COMP%] {\\r\\n  height: 100vh !important;\\r\\n}\\r\\n\\r\\n[_ngcontent-%COMP%]::deep   .btn-primary-ememsa[_ngcontent-%COMP%] {\\r\\n  background-color: #f7b924;\\r\\n  border-color: #f7b924;\\r\\n  color: #000001;\\r\\n}\\r\\n\\r\\n  [_ngcontent-%COMP%]::deep   .btn-primary-ememsa[_ngcontent-%COMP%]:hover {\\r\\n      background-color: #e6b02e;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHdCQUF3QjtBQUMxQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixxQkFBcUI7RUFDckIsY0FBYztBQUNoQjs7RUFFRTtNQUNJLHlCQUF5QjtFQUM3QiIsInNvdXJjZXNDb250ZW50IjpbIjo6ZGVlcCAuaC0xMDAge1xyXG4gIGhlaWdodDogMTAwdmggIWltcG9ydGFudDtcclxufVxyXG5cclxuOjpkZWVwIC5idG4tcHJpbWFyeS1lbWVtc2Ege1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNmN2I5MjQ7XHJcbiAgYm9yZGVyLWNvbG9yOiAjZjdiOTI0O1xyXG4gIGNvbG9yOiAjMDAwMDAxO1xyXG59XHJcblxyXG4gIDo6ZGVlcCAuYnRuLXByaW1hcnktZW1lbXNhOmhvdmVyIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U2YjAyZTtcclxuICB9XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,WAAW,QAAQ,sBAAsB;AAIlD,SAAqBC,GAAG,QAAQ,MAAM;AAEtC,SAASC,WAAW,QAAQ,8BAA8B;;;;;;;;;;;ICO5CC,6BAAmC;IACjCA,2BAAK;IACHA,kCAAoD;IACtDA,iBAAM;IACRA,0BAAe;;;;IAFEA,eAAwB;IAAxBA,6CAAwB;;;;;IAIvCA,4BAAM;IAM4BA,uBAAO;IAAAA,iBAAQ;IACzCA,4BAA6F;IAE/FA,iBAAM;IAERA,+BAAsB;IAEoBA,yBAAQ;IAAAA,iBAAQ;IACtDA,6BACuB;IAEzBA,iBAAM;IAGVA,gCAAoC;IACYA,aAAiB;IAAAA,iBAAK;IAEtEA,2BACM;IAENA,gCAAuC;IAEyBA,mCAAa;IAAAA,iBAAS;;;;IAPtCA,gBAAiB;IAAjBA,0CAAiB;;;;;IAtBrEA,gFAiCc;;;;;;IAEZA,+CAC0C;IADrBA;MAAAA;MAAA;MAAA;IAAA,EAAkC;IACbA,iBAAsB;;;;IAA9DA,4DAAuC;;;ADxCzD,OAAM,MAAOC,cAAc;EAYzBC,YAAoBC,WAAiC,EAASC,MAAc;IAAxD,gBAAW,GAAXD,WAAW;IAA+B,WAAM,GAANC,MAAM;IAXpE,iBAAY,GAAYL,WAAW,CAACM,UAAU;IAC9C,mBAAc,GAAS,KAAK;IAC5B,iBAAY,GAAS,KAAK;IAE1B,gBAAW,GAACR,WAAW,CAACS,QAAQ;IAEhC,aAAQ,GAAG,IAAI;IAEf,kBAAa,GAAU,mBAAmB;EAGoC;EAC9EC,0BAA0B;IACxB,OAAO,IAAI,CAACJ,WAAW,CAACK,yBAAyB,CAAC,IAAI,CAACC,IAAI,CAAC,CAACC,IAAI,CAC/DZ,GAAG,CAAEa,YAA4B,IAAI;MACnC,IAAIA,YAAY,IAAI,IAAI,EAAE;QACxB;QACA,IAAI,IAAI,CAACC,YAAY,EAAE;UACrB,IAAID,YAAY,CAACE,UAAU,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,KAAK,EAAE,CAAC,EAAE;YAC/C,IAAI,CAACX,MAAM,CAACY,QAAQ,CAAC,CAAC,qCAAqC,CAAC,CAAC;WAC9D,MAAM;YACL,IAAI,CAACZ,MAAM,CAACY,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;;SAE9B,MAAM;UACL,IAAI,CAACZ,MAAM,CAACY,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;;QAE7B,OAAO,IAAI;OACZ,MAAM;QACL,IAAI,CAACC,aAAa,GAAG,8BAA8B;QACnD,OAAO,KAAK;;IAEhB,CAAC,CAAC,CACH;IAED;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACF;;EACAC,oBAAoB,CAACC,CAAQ;IAC3B,IAAI,CAACV,IAAI,CAACW,SAAS,GAAGD,CAAC;IACvB,IAAI,CAACZ,0BAA0B,EAAE;EACnC;;;mBAvDWN,cAAc;AAAA;;QAAdA,cAAc;EAAAoB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCf3BzB,8BAA4D;MAIpDA,kCAAmC;MACnCA,8BAAgG;MAE5FA,yBAA4B;MAC5BA,6BAAiB;MACOA,4BAAW;MAAAA,iBAAO;MACxCA,6BAAM;MAAAA,kDAA4B;MAAAA,iBAAO;MAE3CA,0BAA+B;MAC/BA,4BAAK;MACHA,oFAIe;MACfA,6DAiCc;MACdA,mHAGc;MAChBA,iBAAM;;;;MA3CWA,gBAAkB;MAAlBA,uCAAkB;MAKnBA,eAAsB;MAAtBA,0CAAsB","names":["TypeLoading","map","environment","i0","LoginComponent","constructor","userService","router","production","BallBeat","validarUserAndEmpresaAsync","AthenticateByEmpresaAsync","user","pipe","returnedUser","isProduction","IdPerfiles","some","c","navigate","loginMesssage","enviarListadoEmpresa","e","IdEmpresa","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\Jhony Malpartida\\Documents\\GitHub\\Demo-Parte-Diario\\src\\app\\login\\login.component.ts","C:\\Users\\Jhony Malpartida\\Documents\\GitHub\\Demo-Parte-Diario\\src\\app\\login\\login.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { TypeLoading } from '../model/TypeLoading';\nimport { PerfilEmpresaDTO } from '../interface/PerfilEmpresaDTO';\nimport { AuthenticateRequest } from '../interface/AuthenticateRequest';\nimport { AuthenticationService } from '../services/authentication.service';\nimport { Observable, map } from 'rxjs';\nimport { Router } from '@angular/router';\nimport { environment } from 'src/environments/environment';\nimport { UsuarioResponse } from '../model/UsuarioResponse';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  isProduction: boolean = environment.production;\n  mostrarEmpresa:boolean=false;\n  sleepEmpresa:boolean=false;\n  loginMesssage!:string;\n  getTypeLoad=TypeLoading.BallBeat;\n\n  disabled = true;\n  message!:string;\n  messageStyles:string = \"visibility:hidden\";\n  user!:AuthenticateRequest;\n  perfilEmpresaDTOs!:PerfilEmpresaDTO[];\n  constructor(private userService:AuthenticationService,private router: Router){}\n  validarUserAndEmpresaAsync(): Observable<boolean> {\n    return this.userService.AthenticateByEmpresaAsync(this.user).pipe(\n      map((returnedUser:UsuarioResponse) => {\n        if (returnedUser != null) {\n          // (AuthenticationStateProvider as State.AuthState).MarkUserAsAuthenticated(returnedUser);\n          if (this.isProduction) {\n            if (returnedUser.IdPerfiles.some(c => c === 62)) {\n              this.router.navigate(['/http://192.168.252.6/webproduccion']);\n            } else {\n              this.router.navigate(['/']);\n            }\n          } else {\n            this.router.navigate(['/']);\n          }\n          return true;\n        } else {\n          this.loginMesssage = \"Invalid username or password\";\n          return false;\n        }\n      })\n    );\n  \n    // if (returnedUser != null) {\n    //   await (AuthenticationStateProvider as State.AuthState).MarkUserAsAuthenticated(returnedUser);\n    //   if (environment.IsProduction()) {\n    //     if (returnedUser.IdPerfiles.some(c => c === 62)) {\n    //       NavigationManager.NavigateTo(\"http://192.168.252.6/webproduccion\");\n    //     } else {\n    //       NavigationManager.NavigateTo(\"\");\n    //     }\n    //   } else {\n    //     NavigationManager.NavigateTo(\"\");\n    //   }\n    //   return true;\n    // } else {\n    //   LoginMesssage = \"Invalid username or password\";\n    //   return false;\n    // }\n  }\n  enviarListadoEmpresa(e:number){\n    this.user.IdEmpresa = e;\n    this.validarUserAndEmpresaAsync();\n  }\n}\n","<div class=\"app-container app-theme-white body-tabs-shadow\">\n  <div class=\"app-container\">\n    <div class=\"h-100\">\n      <div class=\"h-100 no-gutters row\">\n        <app-login-slide></app-login-slide>\n        <div class=\"h-100 d-flex bg-white justify-content-center align-items-center col-md-12 col-lg-8\">\n          <div class=\"mx-auto app-login-box col-sm-12 col-md-10 col-lg-9\">\n            <div class=\"app-logo\"></div>\n            <h4 class=\"mb-0\">\n              <span class=\"d-block\">Bienvenido,</span>\n              <span>Inicie sesión con su cuenta.</span>\n            </h4>\n            <div class=\"divider row\"></div>\n            <div>\n              <ng-container *ngIf=\"sleepEmpresa\">\n                <div>\n                  <app-loading [typeLoad]=\"getTypeLoad\"></app-loading>\n                </div>\n              </ng-container>\n              <ng-template *ngIf=\"!mostrarEmpresa;else mostrarEmpresaElse\">\n                <form>\n                  <!-- <DataAnnotationsValidator />\n                                  <ValidationSummary /> -->\n                  <div class=\"form-row\">\n                    <div class=\"col-md-6\">\n                      <div class=\"position-relative form-group\">\n                        <label for=\"Dni\" class=\"\">Usuario</label>\n                        <input name=\"Dni\" id=\"Dni\" placeholder=\"Ingrese su usuario\" type=\"text\" class=\"form-control\">\n                        <!-- <ValidationMessageCustom For=\"@(() => user.DNI)\" /> -->\n                      </div>\n                    </div>\n                    <div class=\"col-md-6\">\n                      <div class=\"position-relative form-group\">\n                        <label for=\"examplePassword\" class=\"\">Password</label>\n                        <input name=\"password\" id=\"examplePassword\" placeholder=\"Ingrese su contraseña\" type=\"password\"\n                          class=\"form-control\">\n                        <!-- <ValidationMessageCustom For=\"@(() => user.Pass)\" /> -->\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"position-relative form\">\n                    <p style=\"color: red;text-align: center;\"><em>{{loginMesssage}}</em></p>\n                  </div>\n                  <div class=\"position-relative form-check\">\n                  </div>\n                  <div class=\"divider row\"></div>\n                  <div class=\"d-flex align-items-center\">\n                    <div class=\"ml-auto\">\n                      <button class=\"btn btn-primary-ememsa btn-lg\" type=\"submit\">Inicie sesión</button>\n                    </div>\n                  </div>\n                </form>\n              </ng-template>\n              <ng-template #mostrarEmpresaElse>\n                <app-listado-empresa (OnAceptar)=\"enviarListadoEmpresa\"\n                  [perfilEmpresaDTOs]=\"perfilEmpresaDTOs\"></app-listado-empresa>\n              </ng-template>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}